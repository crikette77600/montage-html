function downloadUsedCanvases() {
    const canvasContainers = document.querySelectorAll('.tab-content');
    canvasContainers.forEach(container => {
        const canvas = container.querySelector('canvas');
        const imgInput = container.querySelector('input[type="file"]');
        if (canvas && imgInput && imgInput.files.length > 0) {
            let formatLabel = "";

            // Identification du type et format
            const id = container.id;
            if (["bp1", "bonplan", "native1", "format320", "format300x250", "interstitielapp"].includes(id)) {
                if (id === "format320") formatLabel = "APP_320x100";
                else if (id === "format300x250") formatLabel = "APP_300x250";
                else if (id === "interstitielapp") formatLabel = "APP_INTERSTITIEL";
                else if (id === "bp1") formatLabel = "APP_BP1";
                else if (id === "bonplan") formatLabel = "APP_BP234";
                else if (id === "native1") formatLabel = "APP_NATIVE1";
            } else {
                if (id === "format300") formatLabel = "WEB_300x600";
                else if (id === "format728") formatLabel = "WEB_728x90";
                else if (id === "format970") formatLabel = "WEB_970x250";
                else if (id === "interstitiel") formatLabel = "WEB_INTERSTITIEL";
            }

            const link = document.createElement('a');
            link.download = `${formatLabel}.png`;
            link.href = canvas.toDataURL("image/png");
            link.click();
        }
    });
}
